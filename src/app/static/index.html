<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Heart Disease Predictor</title>
  <style>
    body{font-family:Arial,Helvetica,sans-serif;margin:40px}
    label{display:block;margin-top:8px}
    input, select{width:200px;padding:6px}
    button{margin-top:12px;padding:8px 12px}
    pre{background:#f6f8fa;padding:12px}
  </style>
</head>
<body>
  <h1>Heart Disease Predictor</h1>
  <p>Fill the form and click <strong>Predict</strong>. Uses the API at <code>/predict</code>.</p>
  <div id="form">
    <label>Age <input id="Age" type="number" value="63"></label>
    <label>Sex <select id="Sex"><option value="1">Male (1)</option><option value="0">Female (0)</option></select></label>
    <label>Chest pain type <input id="Chest pain type" type="number" value="4"></label>
    <label>BP <input id="BP" type="number" value="150"></label>
    <label>Cholesterol <input id="Cholesterol" type="number" value="407"></label>
    <label>FBS over 120 <input id="FBS over 120" type="number" value="0"></label>
    <label>EKG results <input id="EKG results" type="number" value="2"></label>
    <label>Max HR <input id="Max HR" type="number" value="154"></label>
    <label>Exercise angina <input id="Exercise angina" type="number" value="0"></label>
    <label>ST depression <input id="ST depression" type="number" step="0.1" value="4.0"></label>
    <label>Slope of ST <input id="Slope of ST" type="number" value="2"></label>
    <label>Number of vessels fluro <input id="Number of vessels fluro" type="number" value="3"></label>
    <label>Thallium <input id="Thallium" type="number" value="7"></label>
    <button id="predict">Predict</button>
  </div>
  <h2>Result</h2>
  <pre id="result">No prediction yet</pre>
  <script>
    document.getElementById('predict').addEventListener('click', async () => {
      const keys = ["Age","Sex","Chest pain type","BP","Cholesterol","FBS over 120","EKG results","Max HR","Exercise angina","ST depression","Slope of ST","Number of vessels fluro","Thallium"];
      const payload = {};
      for (const k of keys) {
        const el = document.getElementById(k);
        payload[k] = el.type === 'number' ? (el.step ? parseFloat(el.value) : parseInt(el.value)) : el.value;
      }
      document.getElementById('result').textContent = 'Requesting...';
      try {
        const res = await fetch('/predict', {
          method: 'POST',
          headers: {'Content-Type':'application/json'},
          body: JSON.stringify(payload)
        });
        const data = await res.json();
        document.getElementById('result').textContent = JSON.stringify(data, null, 2);
      } catch (err) {
        document.getElementById('result').textContent = err.toString();
      }
    });
  </script>
</body>
</html>
